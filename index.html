<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemical Risk Assessment</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>Chemical Risk Assessment</h1>
    </header>

    <main>
        <section>
            <h2>Select Chemical</h2>
            <select id="chemicalSelect">
                <option value="" disabled selected>Select a Chemical</option>
                <!-- Options will be populated dynamically -->
            </select>
        </section>

        <section id="chemical-info">
            <h2>Chemical Information</h2>
            <div id="chemicalDetails">
                <!-- Chemical details will be displayed here -->
            </div>
        </section>

        <section id="risk-assessment">
            <h2>Risk Assessment</h2>
            <form id="riskForm">
                <label for="concentration">Concentration (c) [mg/kg]:</label>
                <input type="number" id="concentration" step="any" required>

                <label for="exposure">Exposure (e) [kg/day]:</label>
                <input type="number" id="exposure" step="any" required>

                <label for="bodyWeight">Body Weight [kg]:</label>
                <input type="number" id="bodyWeight" step="any" required>

                <label for="ld50">LD50 Value [mg/kg]:</label>
                <input type="number" id="ld50" step="any" required>

                <button type="button" id="calculateRisk">Calculate Risk</button>
            </form>

            <h3>Calculated Risk Level</h3>
            <p id="riskClassification">Please select a chemical and enter data.</p>

            <h3>Comparison Chart</h3>
            <canvas id="riskChart"></canvas>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Chemical Risk Assessment</p>
    </footer>

    <script>
        const chemicalData = {
            "Caffeine": {
                "ld50": 192,
                "qsarRisk": 0.05,
                "experimentalRisk": 0.04,
                "details": {
                    "Description": "A central nervous system stimulant.",
                    "Diseases": "Potential for addiction and anxiety.",
                    "Solution": "Limit intake and avoid excessive use."
                }
            },
            "Aspartame": {
                "ld50": 5000,
                "qsarRisk": 0.01,
                "experimentalRisk": 0.005,
                "details": {
                    "Description": "A low-calorie sweetener.",
                    "Diseases": "Possible risk of headaches and allergic reactions.",
                    "Solution": "Use in moderation."
                }
            },
            // Add other chemicals similarly
        };

        function populateChemicalOptions() {
            const select = document.getElementById('chemicalSelect');
            for (const chemical in chemicalData) {
                const option = document.createElement('option');
                option.value = chemical;
                option.textContent = chemical;
                select.appendChild(option);
            }
        }

        document.getElementById('chemicalSelect').addEventListener('change', updateChemicalDetails);

        function updateChemicalDetails() {
            const chemical = document.getElementById('chemicalSelect').value;
            if (chemical) {
                const details = chemicalData[chemical].details;
                document.getElementById('chemicalDetails').innerHTML = `
                    <h3>${chemical}</h3>
                    <p><strong>Description:</strong> ${details.Description}</p>
                    <p><strong>Diseases Caused:</strong> ${details.Diseases}</p>
                    <p><strong>Solution:</strong> ${details.Solution}</p>
                `;
            }
        }

        document.getElementById('calculateRisk').addEventListener('click', function () {
            const chemical = document.getElementById('chemicalSelect').value;
            const concentration = parseFloat(document.getElementById('concentration').value);
            const exposure = parseFloat(document.getElementById('exposure').value);
            const bodyWeight = parseFloat(document.getElementById('bodyWeight').value);
            const ld50 = parseFloat(document.getElementById('ld50').value);

            if (!chemical || isNaN(concentration) || isNaN(exposure) || isNaN(bodyWeight) || isNaN(ld50)) {
                alert('Please fill in all fields.');
                return;
            }

            const qsarRisk = chemicalData[chemical].qsarRisk;
            const calculatedRisk = (concentration * exposure) / (bodyWeight * ld50);
            const riskClassification = calculatedRisk < 0.01 ? 'Low Risk' : (calculatedRisk < 0.1 ? 'Moderate Risk' : 'High Risk');

            document.getElementById('riskClassification').textContent = `Calculated Risk Level: ${riskClassification}`;

            updateChart(qsarRisk, calculatedRisk);
        });

        function updateChart(qsarRisk, calculatedRisk) {
            const ctx = document.getElementById('riskChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['QSAR Prediction', 'Calculated Risk'],
                    datasets: [{
                        label: 'Risk Level',
                        data: [qsarRisk, calculatedRisk],
                        backgroundColor: ['rgba(75, 192, 192, 0.2)', 'rgba(255, 99, 132, 0.2)'],
                        borderColor: ['rgba(75, 192, 192, 1)', 'rgba(255, 99, 132, 1)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Initialize the page
        populateChemicalOptions();
    </script>
</body>
</html>
